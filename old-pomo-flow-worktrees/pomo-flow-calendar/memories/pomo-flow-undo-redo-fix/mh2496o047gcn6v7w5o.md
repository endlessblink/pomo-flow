---
id: mh2496o047gcn6v7w5o
timestamp: 2025-10-22T14:56:29.184Z
project: pomo-flow-undo-redo-fix
category: documentation
tags: []
priority: medium
---

## VueUse Documentation Retrieved: useManualRefHistory

### System Choice: VueUse useManualRefHistory 
**Trust Score:** 8.8/10 - High authority, well-documented
**Why VueUse:** Already partially working, simpler than command pattern, official Vue ecosystem

### Key VueUse Features for Undo/Redo:
1. **Manual control via commit()** - Perfect for keyboard deletions
2. **Automatic undo/redo capabilities** with history tracking
3. **Object cloning support** with `clone: true` for complex task objects
4. **Capacity limits** to prevent memory issues
5. **Custom dump/parse functions** for JSON serialization
6. **Deep tracking for nested objects** with `deep: true`

### Core Implementation Pattern:
```typescript
import { useManualRefHistory } from '@vueuse/core'

const state = ref(initialState)
const { history, commit, undo, redo, canUndo, canRedo } = useManualRefHistory(state, {
  capacity: 50,
  clone: true,
  deep: true,
  dump: JSON.stringify,
  parse: JSON.parse
})
```

### Workflow:
1. State changes happen automatically
2. Call `commit()` to save history point
3. Use `undo()`/`redo()` for navigation
4. Access `canUndo`/`canRedo` for UI state

This is exactly what we need for the unified undo/redo system!