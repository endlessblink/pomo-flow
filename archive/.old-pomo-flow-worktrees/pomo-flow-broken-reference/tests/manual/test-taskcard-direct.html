<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskCard Completion Circle Test</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        :root {
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --radius-md: 6px;
            --radius-full: 9999px;
            --duration-fast: 150ms;
            --duration-normal: 200ms;
            --spring-smooth: cubic-bezier(0.4, 0, 0.2, 1);
            --surface-tertiary: #f8fafc;
            --border-subtle: #e2e8f0;
            --border-medium: #cbd5e1;
            --text-primary: #1e293b;
            --text-muted: #64748b;
            --state-hover-bg: #f1f5f9;
            --state-hover-border: #cbd5e1;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --state-hover-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --state-hover-glow: 0 0 0 1px rgba(59, 130, 246, 0.1);
            --state-active-glass: blur(8px);
            --color-danger: #ef4444;
            --color-warning: #f59e0b;
            --color-info: #3b82f6;
            --text-sm: 14px;
            --font-medium: 500;
            --leading-tight: 1.25;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            background: #f8fafc;
            margin: 0;
        }

        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .test-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
        }

        .test-section h2 {
            margin-top: 0;
            color: #1e293b;
        }

        /* TaskCard styles copied from component */
        .task-card {
            background: var(--surface-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            padding: var(--space-2) var(--space-3);
            margin-bottom: var(--space-2);
            cursor: pointer;
            transition: all var(--duration-normal) var(--spring-smooth);
            box-shadow: var(--shadow-sm);
            position: relative;
            min-height: 40px;
            min-width: 320px;
            width: 100%;
        }

        .task-card:hover {
            background: var(--state-hover-bg);
            border-color: var(--state-hover-border);
            transform: translateY(-1px);
            box-shadow: var(--state-hover-shadow);
        }

        .task-card.completed {
            opacity: 0.8;
            background: #f1f5f9;
        }

        /* Todoist-style completion circle */
        .completion-circle {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid var(--border-medium);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-right: var(--space-2);
            transition: all var(--duration-fast) ease;
            cursor: pointer;
            position: relative;
        }

        .completion-circle:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        /* Priority-based color classes for pending circles */
        .pending-circle.priority-high-circle {
            border-color: var(--color-danger);
            background: rgba(239, 68, 68, 0.1);
        }

        .pending-circle.priority-medium-circle {
            border-color: var(--color-warning);
            background: rgba(245, 158, 11, 0.1);
        }

        .pending-circle.priority-low-circle {
            border-color: var(--color-info);
            background: rgba(59, 130, 246, 0.1);
        }

        .pending-circle.priority-none-circle {
            border-color: var(--text-muted);
            background: rgba(156, 163, 175, 0.1);
        }

        /* Priority-based color classes for completed circles */
        .completed-circle.priority-high-circle {
            background: var(--color-danger);
            border-color: var(--color-danger);
            color: white;
        }

        .completed-circle.priority-medium-circle {
            background: var(--color-warning);
            border-color: var(--color-warning);
            color: white;
        }

        .completed-circle.priority-low-circle {
            background: var(--color-info);
            border-color: var(--color-info);
            color: white;
        }

        .completed-circle.priority-none-circle {
            background: var(--text-muted);
            border-color: var(--text-muted);
            color: white;
        }

        .card-header {
            display: flex;
            align-items: flex-start;
            gap: var(--space-2);
            width: 100%;
            justify-content: space-between;
        }

        .title-section {
            flex: 1;
            min-width: 0;
        }

        .task-title {
            color: var(--text-primary);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            margin: 0 0 var(--space-1) 0;
            line-height: var(--leading-tight);
            word-wrap: break-word;
            hyphens: auto;
            flex: 1;
            min-width: 120px;
        }

        .task-title.completed-title {
            text-decoration: line-through;
            color: var(--text-muted);
        }

        .metadata-badges {
            display: flex;
            flex-wrap: nowrap;
            gap: var(--space-1);
            align-items: center;
            overflow: hidden;
        }

        .meta-badge {
            display: inline-flex;
            align-items: center;
            gap: 2px;
            font-size: 10px;
            font-weight: var(--font-medium);
            padding: 2px 6px;
            border-radius: var(--radius-full);
            white-space: nowrap;
        }

        .priority-badge {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .priority-badge.priority-high {
            color: var(--color-danger);
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .priority-badge.priority-medium {
            color: var(--color-warning);
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.2);
        }

        .priority-badge.priority-low {
            color: var(--color-info);
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .priority-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
        }

        .checkmark {
            width: 10px;
            height: 10px;
            fill: currentColor;
        }

        .test-description {
            color: #64748b;
            font-size: 14px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="test-container">
            <h1>TaskCard Completion Circle Test</h1>

            <div class="test-section">
                <h2>ðŸ”´ High Priority Tasks</h2>
                <p class="test-description">Should show red completion circles</p>
                <task-card
                    v-for="task in highPriorityTasks"
                    :key="task.id"
                    :task="task"
                    @toggle-completion="toggleCompletion(task.id)">
                </task-card>
            </div>

            <div class="test-section">
                <h2>ðŸŸ  Medium Priority Tasks</h2>
                <p class="test-description">Should show orange completion circles</p>
                <task-card
                    v-for="task in mediumPriorityTasks"
                    :key="task.id"
                    :task="task"
                    @toggle-completion="toggleCompletion(task.id)">
                </task-card>
            </div>

            <div class="test-section">
                <h2>ðŸ”µ Low Priority Tasks</h2>
                <p class="test-description">Should show blue completion circles</p>
                <task-card
                    v-for="task in lowPriorityTasks"
                    :key="task.id"
                    :task="task"
                    @toggle-completion="toggleCompletion(task.id)">
                </task-card>
            </div>

            <div class="test-section">
                <h2>âšª No Priority Tasks</h2>
                <p class="test-description">Should show gray completion circles</p>
                <task-card
                    v-for="task in noPriorityTasks"
                    :key="task.id"
                    :task="task"
                    @toggle-completion="toggleCompletion(task.id)">
                </task-card>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        // TaskCard component - use render function for better compatibility
        const TaskCard = {
            props: ['task'],
            emits: ['toggle-completion'],
            computed: {
                completionClass() {
                    return this.task.progress === 100 ? 'completed-circle' : 'pending-circle';
                },
                priorityColorClass() {
                    const priority = this.task.priority;
                    if (!priority) return 'priority-none-circle';
                    return `priority-${priority}-circle`;
                },
                completionTooltip() {
                    if (this.task.progress === 100) {
                        return 'Mark as incomplete (0% progress)';
                    }
                    return `Mark as complete (100% progress)`;
                }
            },
            render() {
                const h = this.$createElement;
                return h('div', {
                    class: ['task-card', { 'completed': this.task.progress === 100 }]
                }, [
                    h('div', { class: 'card-header' }, [
                        h('div', {
                            class: ['completion-circle', this.completionClass, this.priorityColorClass],
                            onClick: (e) => {
                                e.stopPropagation();
                                this.$emit('toggle-completion');
                            },
                            title: this.completionTooltip
                        }, this.task.progress === 100 ? [
                            h('svg', {
                                class: 'checkmark',
                                viewBox: '0 0 24 24',
                                fill: 'none',
                                stroke: 'currentColor',
                                'stroke-width': '2'
                            }, [
                                h('path', { d: 'M20 6L9 17l-5-5' })
                            ])
                        ] : []),
                        h('div', { class: 'title-section' }, [
                            h('h3', {
                                class: ['task-title', { 'completed-title': this.task.progress === 100 }]
                            }, this.task.title),
                            h('div', { class: 'metadata-badges' }, [
                                h('span', {
                                    class: ['meta-badge', 'priority-badge', `priority-${this.task.priority || 'medium'}`]
                                }, [
                                    h('span', { class: 'priority-dot' }),
                                    (this.task.priority || 'none').charAt(0).toUpperCase()
                                ])
                            ])
                        ])
                    ])
                ]);
            }
        };

        createApp({
            components: {
                TaskCard
            },
            data() {
                return {
                    highPriorityTasks: [
                        { id: 'high-1', title: 'High Priority Task - Not Started', priority: 'high', progress: 0 },
                        { id: 'high-2', title: 'High Priority Task - Completed', priority: 'high', progress: 100 }
                    ],
                    mediumPriorityTasks: [
                        { id: 'medium-1', title: 'Medium Priority Task - Not Started', priority: 'medium', progress: 0 },
                        { id: 'medium-2', title: 'Medium Priority Task - Completed', priority: 'medium', progress: 100 }
                    ],
                    lowPriorityTasks: [
                        { id: 'low-1', title: 'Low Priority Task - Not Started', priority: 'low', progress: 0 },
                        { id: 'low-2', title: 'Low Priority Task - Completed', priority: 'low', progress: 100 }
                    ],
                    noPriorityTasks: [
                        { id: 'none-1', title: 'No Priority Task - Not Started', priority: null, progress: 0 },
                        { id: 'none-2', title: 'No Priority Task - Completed', priority: null, progress: 100 }
                    ]
                };
            },
            methods: {
                toggleCompletion(taskId) {
                    // Find task in all categories
                    const allTasks = [
                        ...this.highPriorityTasks,
                        ...this.mediumPriorityTasks,
                        ...this.lowPriorityTasks,
                        ...this.noPriorityTasks
                    ];

                    const task = allTasks.find(t => t.id === taskId);
                    if (task) {
                        task.progress = task.progress === 100 ? 0 : 100;
                        console.log(\`Task \${task.title} progress toggled to \${task.progress}%\`);
                    }
                }
            }
        }).mount('#app');
    </script>
</body>
</html>