<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Undo/Redo Test</title>
    <style>
        body {
            font-family: system-ui, sans-serif;
            max-width: 600px;
            margin: 2rem auto;
            padding: 1rem;
        }
        .test-section {
            background: #f8fafc;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.25rem;
        }
        button:hover {
            background: #2563eb;
        }
        .status {
            padding: 0.5rem;
            margin: 0.5rem 0;
            border-radius: 4px;
        }
        .success { background: #dcfce7; color: #166534; }
        .error { background: #fef2f2; color: #dc2626; }
        .info { background: #eff6ff; color: #1d4ed8; }
        .log {
            background: #1f2937;
            color: #f3f4f6;
            padding: 1rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.875rem;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>üîß Simple Undo/Redo Test</h1>

    <div class="test-section">
        <h2>Step 1: Open Main App</h2>
        <p>Open the app in a new tab: <a href="http://localhost:5173" target="_blank">http://localhost:5173</a></p>
    </div>

    <div class="test-section">
        <h2>Step 2: Test in Browser Console</h2>
        <p>Open browser console (F12) in the main app and run these commands:</p>
        <pre><code>// Check if undo/redo store exists
import('/src/stores/undoRedo.js').then(({ useUndoRedoStore }) => {
    const store = useUndoRedoStore();
    console.log('Store exists:', !!store);
    console.log('Can undo:', store.canUndo);
    console.log('Can redo:', store.canRedo);
    console.log('Undo count:', store.undoCount);
    console.log('Redo count:', store.redoCount);
});

// Check if keyboard handler exists
import('/src/utils/globalKeyboardHandler.js').then(({ getGlobalKeyboardHandler }) => {
    const handler = getGlobalKeyboardHandler();
    console.log('Keyboard handler exists:', !!handler);
    if (handler) {
        console.log('Settings:', handler.getSettings());
    }
});</code></pre>
    </div>

    <div class="test-section">
        <h2>Step 3: Create Test Task</h2>
        <p>In the main app, create a task and check console for "UndoRedo: Executed" messages.</p>
    </div>

    <div class="test-section">
        <h2>Step 4: Test Keyboard Shortcuts</h2>
        <p>Press Ctrl+Z to undo and check console for "UndoRedo: Undid" messages.</p>
        <p>Press Ctrl+Shift+Z to redo and check console for "UndoRedo: Redid" messages.</p>
    </div>

    <div class="test-section">
        <h2>Step 5: Manual Test Commands</h2>
        <p>Run these in the browser console to test directly:</p>
        <pre><code>// Test undo/redo directly
import('/src/stores/undoRedo.js').then(({ useUndoRedoStore }) => {
    const store = useUndoRedoStore();
    console.log('Before undo - Can undo:', store.canUndo);
    store.undo().then(() => {
        console.log('After undo - Can undo:', store.canUndo);
        console.log('Can redo:', store.canRedo);
    });
});

// Test keyboard handler directly
import('/src/utils/globalKeyboardHandler.js').then(({ initGlobalKeyboardShortcuts }) => {
    const handler = initGlobalKeyboardShortcuts();
    console.log('Keyboard handler initialized:', !!handler);
});</code></pre>
    </div>

    <div class="test-section">
        <h2>Expected Console Messages</h2>
        <ul>
            <li>‚úÖ "UndoRedo: Global keyboard handler initialized"</li>
            <li>‚úÖ "UndoRedo: Executed - [action description]"</li>
            <li>‚úÖ "UndoRedo: Undid - [action description]"</li>
            <li>‚úÖ "UndoRedo: Redid - [action description]"</li>
            <li>‚úÖ "UndoRedo: Undo shortcut triggered"</li>
            <li>‚úÖ "UndoRedo: Redo shortcut triggered"</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>Troubleshooting</h2>
        <p><strong>If undo/redo doesn't work:</strong></p>
        <ol>
            <li>Check for JavaScript errors in console</li>
            <li>Verify stores are initialized correctly</li>
            <li>Make sure components are using *WithUndo methods</li>
            <li>Check that keyboard handler is initialized</li>
        </ol>
    </div>

    <script>
        console.log('üìã Simple undo/redo test page loaded');
        console.log('üìù Follow the steps above to test the undo/redo system');
    </script>
</body>
</html>